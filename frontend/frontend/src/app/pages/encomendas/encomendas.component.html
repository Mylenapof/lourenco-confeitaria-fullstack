<div class="encomendas-page">
  <div class="encomendas-header pink-gradient-bg">
    <div class="container">
      <h1>Faça sua Encomenda</h1>
      <p>Personalize seu pedido ou encomende centos de salgados</p>
    </div>
  </div>

  <div class="container">
    <div class="encomendas-content">
      <!-- Tipos de Encomenda -->
      <div class="tipo-selector">
        <button
          class="tipo-card"
          [class.active]="tipoSelecionado === 'personalizada'"
          (click)="tipoSelecionado = 'personalizada'"
        >
          <mat-icon>cake</mat-icon>
          <h3>Encomenda Personalizada</h3>
          <p>Bolos, tortas e doces especiais sob medida</p>
        </button>

        <button
          class="tipo-card"
          [class.active]="tipoSelecionado === 'salgados'"
          (click)="tipoSelecionado = 'salgados'"
        >
          <mat-icon>fastfood</mat-icon>
          <h3>Centos de Salgados</h3>
          <p>Salgados fritos e assados para eventos</p>
        </button>
      </div>

      <!-- Formulário -->
      <div class="form-container">
        <div class="form-card">
          <div class="form-header">
            <mat-icon>edit_note</mat-icon>
            <h2>Detalhes da Encomenda</h2>
          </div>

          <form [formGroup]="encomendaForm" (ngSubmit)="onSubmit()">
            <!-- Tipo de Produto -->
            <div class="form-group">
              <label>Tipo de Produto *</label>
              <mat-form-field appearance="outline">
                <mat-select
                  formControlName="tipoProduto"
                  placeholder="Selecione o tipo"
                >
                  <mat-option *ngFor="let tipo of tiposProduto" [value]="tipo">
                    {{ tipo }}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>

            <!-- Tamanho -->
            <div class="form-group">
              <label>Tamanho</label>
              <mat-form-field appearance="outline">
                <mat-select
                  formControlName="tamanho"
                  placeholder="Selecione o tamanho"
                >
                  <mat-option
                    *ngFor="let tamanho of tamanhos"
                    [value]="tamanho"
                  >
                    {{ tamanho }}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>

            <!-- Sabor/Recheio -->
            <div class="form-group">
              <label>Sabor/Recheio</label>
              <mat-form-field appearance="outline">
                <input
                  matInput
                  formControlName="sabor"
                  placeholder="Ex: Chocolate com morango"
                />
              </mat-form-field>
            </div>

            <!-- Decoração/Tema -->
            <div class="form-group">
              <label>Decoração/Tema</label>
              <mat-form-field appearance="outline">
                <textarea
                  matInput
                  formControlName="decoracao"
                  rows="3"
                  placeholder="Descreva como deseja a decoração"
                ></textarea>
              </mat-form-field>
            </div>

            <!-- Observações -->
            <div class="form-group">
              <label>Observações Adicionais</label>
              <mat-form-field appearance="outline">
                <textarea
                  matInput
                  formControlName="observacoes"
                  rows="4"
                  placeholder="Alguma alergia, preferência ou informação adicional?"
                ></textarea>
              </mat-form-field>
            </div>

            <!-- Data de Entrega -->
            <div class="form-group">
              <label>Data de Entrega *</label>
              <mat-form-field appearance="outline">
                <input
                  matInput
                  [matDatepicker]="picker"
                  formControlName="dataEntrega"
                  [min]="minDate"
                  placeholder="Selecione uma data"
                />
                <mat-datepicker-toggle
                  matSuffix
                  [for]="picker"
                ></mat-datepicker-toggle>
                <mat-datepicker #picker></mat-datepicker>
              </mat-form-field>
              <small class="help-text">Prazo mínimo: 3 dias úteis</small>
            </div>

            <!-- Info Box -->
            <div class="info-box">
              <mat-icon>info</mat-icon>
              <div>
                <strong
                  >Enviaremos um orçamento personalizado em até 24 horas</strong
                >
                <p>Entraremos em contato para confirmar todos os detalhes</p>
              </div>
            </div>

            <!-- Botão -->
            <button
              type="submit"
              class="btn-primary btn-block"
              [disabled]="loading"
            >
              <mat-icon>send</mat-icon>
              {{ loading ? "Enviando..." : "Enviar Encomenda" }}
            </button>
          </form>
        </div>

        <!-- Resumo -->
        <div class="resumo-card">
          <h3>Resumo da Encomenda</h3>

          <div
            class="resumo-item"
            *ngIf="encomendaForm.get('tipoProduto')?.value"
          >
            <strong>Tipo:</strong>
            <span>{{ encomendaForm.get("tipoProduto")?.value }}</span>
          </div>

          <div class="resumo-item" *ngIf="encomendaForm.get('tamanho')?.value">
            <strong>Tamanho:</strong>
            <span>{{ encomendaForm.get("tamanho")?.value }}</span>
          </div>

          <div
            class="resumo-item"
            *ngIf="encomendaForm.get('dataEntrega')?.value"
          >
            <strong>Entrega:</strong>
            <span>{{
              encomendaForm.get("dataEntrega")?.value | date : "dd/MM/yyyy"
            }}</span>
          </div>

          <div
            class="resumo-empty"
            *ngIf="!encomendaForm.get('tipoProduto')?.value"
          >
            <p>Preencha o formulário para ver o resumo</p>
          </div>

          <div class="contact-info">
            <h4>Dúvidas?</h4>
            <p>
              <mat-icon>phone</mat-icon>
              (11) 98765-4321
            </p>
            <p>
              <mat-icon>email</mat-icon>
              contato&#64;lourenco.com.br
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
